<?php
namespace app\common\model;

use app\common\traits\model\MyTable;

class LotteryTime extends Base{

    use MyTable;

    protected $table = 'gygy_lottery_time';

    protected static $id_table = 'gygy_lottery_time_id';    
    protected $prefix = 'gygy_lottery_time';
    protected $prefix_db = 'lottery_time';

//    public function __construct($table = null)
//    {
//        if($table){
//            $this->table = $this->prefix."_{$table}";
//        }
//        parent::initialize();
//    }

    public function getActionNoAttr($value)
    {
        return $this->data['qishu'];
    }

    public function setActionNoAttr($value,$data)
    {
        return $this->data['qishu'] = $value;
    }    

    public function getActionTimeAttr($value)
    {
        return $this->data['kaipan'];
    }

    public function setActionTimeAttr($value,$data)
    {
        return $this->data['kaipan'] = $value;
    }   
    public function TypeName(){

        return $this->belongsTo('Type','code','name');
    }
    //----------------åå°------------------
    public static function getList($params){
        $query  =   self::order('id');
        if($params['code']??null){
            $query->where('code',$params['code']);
        }
        $query->with('TypeName');
        return $query->paginate();
    }
}
